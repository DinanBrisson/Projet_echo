{% extends "base.html" %}
{% block title %}Historique des Segmentations{% endblock %}
{% block content %}

<h2>Historique des Segmentations</h2>

{% if histories %}
    <table>
        <tr>
            <th>Utilisateur</th>
            <th>Modèle</th>
            <th>Image Segmentée</th>
            <th>Date</th>
        </tr>
        {% for entry in histories %}
            <tr>
                <td>{{ entry.user.username }}</td>
                <td>{{ entry.model }}</td>
                <td>
                  {% if entry.composite_image %}
                    <img src="data:image/png;base64,{{ entry.composite_image }}" alt="Image Segmentée" width="200">
                  {% else %}
                    Aucun
                  {% endif %}
                </td>
                <td>{{ entry.date.strftime('%Y-%m-%d %H:%M:%S') }}</td>
            </tr>
        {% endfor %}
    </table>
{% else %}
    <p>Aucun historique disponible.</p>
{% endif %}

<a href="{{ url_for('menu') }}">Retour au menu</a>
{% endblock %}
